jQuery(document).ready(function(o){function a(){var a=o(".xoo-qv-images .woocommerce-product-gallery__image"),t=o(".xoo-qv-images .woocommerce-product-gallery");t.flexslider({selector:".woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image",animation:"slide",smoothHeight:!1,directionNav:!1,controlNav:"thumbnails",slideshow:!1,animationSpeed:500,animationLoop:!1,start:function(){t.css("opacity",1);var e=0;a.each(function(){var a=o(this).height();a>e&&(e=a)}),a.each(function(){o(this).css("min-height",e)})}})}function t(){var a=o(".xoo-qv-images .woocommerce-product-gallery__image"),t=o(".xoo-qv-images .woocommerce-product-gallery");a.length>0&&t.prepend('<a href="#" class="woocommerce-product-gallery__trigger">üîç</a>'),t.on("click",".woocommerce-product-gallery__trigger , .woocommerce-product-gallery__image",function(a){!function(a){a.preventDefault();var t,e=o(".xoo-qv-images .woocommerce-product-gallery"),i=o(".pswp")[0],n=function(){var a=o(".xoo-qv-images .woocommerce-product-gallery__image"),t=[];a.length>0&&a.each(function(a,e){var i=o(e).find("img"),n=i.attr("data-large_image"),c=i.attr("data-large_image_width"),r=i.attr("data-large_image_height"),l={src:n,w:c,h:r,title:i.attr("title")};t.push(l)});return t}(),c=o(a.target);t=c.is(".woocommerce-product-gallery__trigger")?e.find(".flex-active-slide"):c.closest(".woocommerce-product-gallery__image");var r={index:o(t).index(),shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0};new PhotoSwipe(i,PhotoSwipeUI_Default,n,r).init()}(a)})}function e(){o(".woocommerce-product-gallery__image").zoom()}function i(){if(xoo_qv_localize.lightbox_enable)switch(xoo_qv_localize.lightbox_type){case"zoom":e(),a();break;case"photoswipe":t(),a();break;case"zoom_photoswipe":e(),a(),t();break;case"prettyphoto":o("a.zoom").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1}),o("a[data-rel^='prettyPhoto']").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})}}function n(a,t){var e=o(document).height()+"px",i=o(document).width()+"px";"top"==a?o(".xoo-qv-inner-modal").css("transform","translate(0,-"+e+")").addClass(t):"next"==a?o(".xoo-qv-inner-modal").css("transform","translate(-"+i+",0)").addClass(t):"prev"==a&&o(".xoo-qv-inner-modal").css("transform","translate("+i+",0)").addClass(t)}function c(a,t){o(".xoo-qv-inner-modal").css("opacity","0").addClass(t)}function r(){}function l(o,a,t){"bounce-in"==xoo_qv_localize.modal_anim?d(o,a,n,t,"xoo-qv-animation-bounce"):"linear"==xoo_qv_localize.modal_anim?d(o,a,n,t,"xoo-qv-animation-linear"):"fade-in"==xoo_qv_localize.modal_anim?d(o,a,c,null,"xoo-qv-animation-fadein"):d(o,a,r)}function v(a){o.each(a.target.classList,function(a,t){"xoo-qv-close"!=t&&"xoo-qv-inner-modal"!=t&&"xoo-qv-atcclose"!=t||(o(".xoo-qv-opac").hide(),o(".xoo-qv-panel").removeClass("xoo-qv-panel-active"),o(".xoo-qv-modal").html(""))})}function d(a,t,e,n,c){var r=o(".xoo-qv-button").length;o.ajax({url:xoo_qv_localize.adminurl,type:"POST",data:{action:"xoo_qv_ajax",product_id:a},success:function(a){o(".xoo-qv-modal").html(a),e(n,c),o(".xoo-qv-counter").html(t+" / "+r),o(".xoo-qv-pl-active").removeClass("xoo-qv-pl-active"),o(".xoo-qv-panel .variations_form").wc_variation_form().trigger("check_variations"),i(),o(".xoo-qv-panel .variations_form select").change()}})}if(o(".xoo-qv-panel").on("click",".xoo-qv-close",v),o(".xoo-qv-panel").on("click",".xoo-qv-atcclose",function(o){o.preventDefault(),v(o)}),o("body").on("click",".xoo-qv-inner-modal",v),o(document).keyup(function(a){27===a.keyCode&&o(".xoo-qv-close").trigger("click")}),"prettyphoto"!=xoo_qv_localize.lightbox_type&&o(".xoo-qv-panel").on("change",".variations_form select",function(){o(".xoo-qv-images .woocommerce-product-gallery").flexslider(0)}),o(document).on("click",".xoo-qv-button",function(a){a.preventDefault(),o(".xoo-qv-opac").show();var t=o(".xoo-qv-panel");t.addClass("xoo-qv-panel-active"),t.find(".xoo-qv-outer-opl").addClass("xoo-qv-pl-active"),l(o(this).data("qv-id"),o(this).index(".xoo-qv-button")+1,"top")}),o(".xoo-qv-panel").on("click",".xoo-qv-nxt",function(){o(".xoo-qv-mpl").addClass("xoo-qv-pl-active");var a,t=o(this).attr("qv-nxt-id"),e=o("[data-qv-id="+t+"]").parents().next().find(".xoo-qv-button"),i=o(e).index(".xoo-qv-button")+1,n=e.data("qv-id");void 0===n?(a=o(".xoo-qv-button:first").data("qv-id"),i=1):a=n,l(a,i,"next")}),o(".xoo-qv-panel").on("click",".xoo-qv-prev",function(){o(".xoo-qv-mpl").addClass("xoo-qv-pl-active");var a,t=o(this).attr("qv-prev-id"),e=o("[data-qv-id="+t+"]").parents().prev().find(".xoo-qv-button"),i=e.data("qv-id"),n=o(e).index(".xoo-qv-button")+1;void 0===i?(a=o(".xoo-qv-button:last").data("qv-id"),n=o(".xoo-qv-button").length):a=i,l(a,n,"prev")}),"true"==xoo_qv_localize.enable_atc){o(".xoo-qv-panel").on("click",".xoo-qv-cback",function(){o(".xoo-qv-cart-success").removeClass("xoo-qv-cart-sactive"),o(".xoo-qv-cartAdded").hide()}),o(document).on("submit",".xoo-qv-summary form.cart",function(a){a.preventDefault(),o(".xoo-qv-atcmsg").html('<i class="xoo-qv xooqv-spinner2 xoo-qv-atcpl"></i> '+xoo_qv_localize.adding_txt),o(".xoo-qv-atcmodal").show();var t=o(this),e=t.find('button[type="submit"]'),i=t.serializeArray();i.push({name:"action",value:"xoo_qv_add_to_cart"}),e.attr("name")&&"add-to-cart"==e.attr("name")&&e.attr("value")&&i.push({name:"add-to-cart",value:e.attr("value")}),function(a,t){o(document.body).trigger("adding_to_cart",[a,t]),o.ajax({url:xoo_qv_localize.wc_ajax_url.toString().replace("%%endpoint%%","xoo_qv_add_to_cart"),type:"POST",data:o.param(t),success:function(t){t.fragments?(o(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,a]),o(".xoo-qv-atcmsg").html('<i class="xoo-qv xooqv-checkmark"></i> '+xoo_qv_localize.added_txt),o(".xoo-qv-atcbtns").show(),"true"==xoo_qv_localize.atc_close_popup&&setTimeout(function(){o(".xoo-qv-close").trigger("click")},1e3)):t.error?(o(".xoo-qv-atcmodal").hide(),o(".xoo-qv-atcerror").html(t.error),setTimeout(function(){o(".xoo-qv-atcerror").hide()},5e3)):console.log(t)}})}(e,i)})}});